---
import MainFlexible from "../components/MainFlexible.astro";
import Layout from "../layouts/Layout.astro";
import { getPageBySlug, getAllPageSlugs } from "../lib/api";

export async function getStaticPaths() {
    const pages = await getAllPageSlugs();
    return pages.map((page) => {
        return {
            params: { slug: page },
        };
    });
}

const title = Astro.params.slug;

const page = await getPageBySlug(Astro.params.slug);
---

<Layout title={title}>
    <MainFlexible page={page} />
</Layout>
